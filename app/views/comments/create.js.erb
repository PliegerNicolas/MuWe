function addComment(newComment) {
  var comments = document.getElementById('comments')
  comments.insertAdjacentHTML('beforeend', newComment)
  if (comments.children.length > 20) {
    comments.children[0].remove();
  }
}

function refreshForm(newFormInnerHTML) {
  const newCommentForm = document.getElementById('new_comment'); // The whole form
  newCommentForm.innerHTML = newFormInnerHTML;
}

<% if @comment.valid? %>
  addComment('<%= j render "comments/show", event: @event, comment: @comment %>'); // New comment
  refreshForm('<%= j render "comments/form", event: @event, comment: Comment.new %>');
<% else %>
  refreshForm('<%= j render "comments/form", event: @event, comment: Comment.new %>');
<% end %>
