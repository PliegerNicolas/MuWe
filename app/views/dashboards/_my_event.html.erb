<div class="my_event">
  <% unless event.status == 'finished' %>
    <%= event.title %> |
    <%= event.status %> |
    <%= event.address %> |
      <% event.participants.each do |participant| %>
        <% if participant.status == 'accepted' %>
          <div class="accepted-user">
            <% if event.participants.where(user_id: event.user_id).include?(participant) %> <!-- Check if host -->
              <%= link_to profile_path(participant.user) do %>
                <%= image_tag participant.user.profile.profile_photo, height: '45px', width: '45px', crop: "scale", gravity: "faces", format: "png", secure: true %>
                <%= participant.user.full_name %>
              <% end %>
            <% else %>  <!-- Not host but accepted -->
              <%= link_to profile_path(participant.user) do %>
                <%= image_tag participant.user.profile.profile_photo, height: '45px', width: '45px', crop: "scale", gravity: "faces", format: "png", secure: true %>
                <%= participant.user.full_name %>

                <%= link_to "Decline", event_decline_user_path(event.id, participant.id), method: :delete %>

              <% end %>
            <% end %>
          </div>
        <% elsif participant.status == 'declined' %>
          <div class="refused-user">
            <%= link_to profile_path(participant.user) do %>
              <%= image_tag participant.user.profile.profile_photo, height: '45px', width: '45px', crop: "scale", gravity: "faces", format: "png", secure: true %>
              <%= participant.user.full_name %>
            <% end %>

            <%= link_to "Accept", event_accept_user_path(event.id, participant.id), method: :post %>

          </div>
        <% else %>

          <div class="postulating-user">
            <%= link_to profile_path(participant.user) do %>
              <%= image_tag participant.user.profile.profile_photo, height: '45px', width: '45px', crop: "scale", gravity: "faces", format: "png", secure: true %>
              <%= participant.user.full_name %>
            <% end %>

            <%= link_to "Accept", event_accept_user_path(event.id, participant.id), method: :post %>
            <%= link_to "Decline", event_decline_user_path(event.id, participant.id), method: :delete %>

          </div>
        <% end %>
      <% end %>
    <%= link_to "Archive", event_path(event.id), method: :delete, data: { confirm: 'Are you sure ? It can\'t be undone' } %>
  <% else %>
    <%= event.title %> |
    <%= event.status %> |
    <%= event.address %> |
  <% end %>
</div>
